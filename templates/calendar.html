{% extends "navbar.html" %}

{% block content %}
<div id="calendar" class="calendar">
    <select id="searchDropdown" name="searchDropdown" style="width:52ch">
        <option>Select Search Method</option>
        <option value="0">By Title</option>
        <option value="1">By Description</option>
        <option value="2">By Date and Time</option>
        <option value="3">By Location</option>
    </select>
    <input type="text" id="titleInput" style="display:none" placeholder="Search by title...">
    <input type="text" id="locInput" style="display:none" placeholder="Search by location...">
    <input type="text" id="desInput" style="display:none" placeholder="Search by description...">
    <input type="text" id="dateInput" style="display:none" placeholder="Search by date or time...">
    {% for item in calendar %}
    <div class="calendar-element">
        <div class="calendar-day">{{ item[2][0][0] }}{{ item[2][0][1] }}{{ item[2][0][2] }}<br>{{item[2][2]}}</div>
        <div style="width:80%;align-items:flex-end;">
            <p class="calendar-time">{{ item[2][1] }} {{ item[2][2] }} @ {{ item[2][4] }}</p>
            <p class="calendar-title">{{ item[0] }}</p>
            <p class="calendar-location">{{item[1]}}</p>
            <p class="calendar-description">{{ item[3]|safe }}</p>
<<<<<<< HEAD
            <!--(title, )-->
=======
>>>>>>> main
        </div>
    </div>
    {% endfor %}
</div>
<!--Search functionality including dropdown to manage type of search. changing dropdown clears search and resets elements-->
<script>
    document.getElementById("titleInput").addEventListener("input", function () {
        var filter, elements, title, titleTxt, i;
        filter = document.getElementById('titleInput').value.toUpperCase();
        elements = document.getElementById("calendar").getElementsByClassName('calendar-element');
        for (i = 0; i < elements.length; i++) {
            title = elements[i].getElementsByClassName("calendar-title")[0];
            if (title) {
                titleTxt = title.textContent || title.innerText;
                if (titleTxt.toUpperCase().indexOf(filter) > -1) {
                    elements[i].style.display = "";
                } else {
                    elements[i].style.display = "none";
                }
            }
        }
    });
<<<<<<< HEAD
    document.getElementById("locInput").addEventListener("input", function () {
        var filter, elements, location, locationTxt, i;
        filter = document.getElementById('locInput').value.toUpperCase();
        elements = document.getElementById('calendar').getElementsByClassName('calendar-element');
        for (i = 0; i < elements.length; i++) {
            location = elements[i].getElementsByClassName('calendar-location')[0];
            if (location) {
                locationTxt = location.textContent || location.innerText;
                if (locationTxt.toUpperCase().indexOf(filter) > -1) {
                    elements[i].style.display = "";
=======
    document.getElementById("locInput").addEventListener("input",function (){
        var filter, elements, location, locationTxt, i;
        filter=document.getElementById('locInput').value.toUpperCase();
        elements=document.getElementById('calendar').getElementsByClassName('calendar-element');
        for(i = 0; i < elements.length; i++){
            location=elements[i].getElementsByClassName('calendar-location')[0];
            if (location){
                locationTxt = location.textContent || location.innerText;
                if(locationTxt.toUpperCase().indexOf(filter) > -1){
                    elements[i].style.display="";
>>>>>>> main
                }
                else elements[i].style.display = "none";
            }
        }
    });
    document.getElementById("desInput").addEventListener("input", function () {
        var filter, elements, description, descriptionTxt, i;
        filter = document.getElementById('desInput').value.toUpperCase();
        elements = document.getElementById('calendar').getElementsByClassName('calendar-element');
        for (i = 0; i < elements.length; i++) {
            description = elements[i].getElementsByClassName("calendar-description")[0];
            if (location) {
                descriptionTxt = description.textContent || description.innerText;
                if (descriptionTxt.toUpperCase().indexOf(filter) > -1) {
                    elements[i].style.display = "";
                }
                else elements[i].style.display = "none";
            }
        }
    });
    document.getElementById("dateInput").addEventListener("input", function () {
        var filter, elements, date, i;
        filter = document.getElementById('dateInput').value.toUpperCase();
        elements = document.getElementById('calendar').getElementsByClassName('calendar-element');
        for (i = 0; i < elements.length; i++) {
            date = elements[i].getElementsByClassName("calendar-time")[0];
            if (date) {
                dateTxt = date.textContent || date.innerText;
                if (dateTxt.toUpperCase().indexOf(filter) > -1) {
                    elements[i].style.display = "";
                }
                else elements[i].style.display = "none";
            }
        }
    });
<<<<<<< HEAD
    document.getElementById("searchDropdown").addEventListener("change", function () {
=======
    document.getElementById("searchDropdown").addEventListener("change", function (){
>>>>>>> main
        var titleInput, locInput, desInput, dateInput;
        titleInput = document.getElementById("titleInput");
        locInput = document.getElementById("locInput");
        desInput = document.getElementById("desInput");
        dateInput = document.getElementById("dateInput");
        var elements = document.getElementsByClassName('calendar-element');
        for (var i = 0; i < elements.length; i++) {
            elements[i].style.display = "";
        }
        switch (this.value) {
            case '0':
                document.getElementById('dateInput').value = "";
                titleInput.style.display = "";
                locInput.style.display = "none";
                desInput.style.display = "none";
                dateInput.style.display = "none";
                break;
            case '3':
                titleInput.style.display = "none";
                locInput.style.display = "";
                desInput.style.display = "none";
                dateInput.style.display = "none";
                break;
            case '1':
                titleInput.style.display = "none";
                locInput.style.display = "none";
                desInput.style.display = "";
                dateInput.style.display = "none";
                break;
            case '2':
                titleInput.style.display = "none";
                locInput.style.display = "none";
                desInput.style.display = "none";
                dateInput.style.display = "";
                break;
            default:
                titleInput.style.display = "none";
                locInput.style.display = "none";
                desInput.style.display = "none";
                dateInput.style.display = "none";
        }
    });
</script>

{% endblock %}